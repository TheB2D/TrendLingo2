"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.useBrowserUse = useBrowserUse;
const react_1 = require("react");
/**
 * A hook to stream Browser Use updates to the client.
 */
function useBrowserUse(route) {
    const [status, setStatus] = (0, react_1.useState)(null);
    (0, react_1.useEffect)(() => {
        const es = new EventSource(route);
        es.addEventListener('status', (e) => {
            if (e instanceof MessageEvent) {
                const msg = JSON.parse(e.data);
                setStatus(msg.data);
                if (msg.data.status === 'finished') {
                    es.close();
                }
            }
            else {
                console.error('Event is not a MessageEvent', e);
            }
        });
        es.addEventListener('end', () => es.close());
        es.addEventListener('error', () => es.close());
        return () => es.close();
    }, [route]);
    return status;
}
//# sourceMappingURL=useBrowserUse.js.map